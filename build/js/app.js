"use strict";function DNA(e){this.genes=[];for(var n=this.fitness=0;n<e;n++)this.genes[n]=newChar();this.getPhrase=function(){return this.genes.join("")},this.calcFitness=function(e){for(var n=0,t=0;t<this.genes.length;t++)this.genes[t]==e.charAt(t)&&n++;this.fitness=n/e.length},this.crossover=function(e){for(var n=new DNA(this.genes.length),t=floor(random(this.genes.length)),s=0;s<this.genes.length;s++)n.genes[s]=t<s?this.genes[s]:e.genes[s];return n},this.mutate=function(n){this.genes=this.genes.map(function(e){return random(1)<n?newChar():e})}}function newChar(){var e=floor(random(63,122));return 63===e&&(e=32),64===e&&(e=46),String.fromCharCode(e)}
"use strict";function Population(t,i,o){this.population,this.matingPool,this.generations=0,this.finished=!1,this.target=t,this.mutationRate=i,this.perfectScore=1,this.best="",this.population=[];for(var s=0;s<o;s++)this.population[s]=new DNA(this.target.length);this.calcFitness=function(){for(var t=0;t<this.population.length;t++)this.population[t].calcFitness(target)},this.calcFitness(),this.matingPool=[],this.naturalSelection=function(){this.matingPool=[];for(var t=0,i=0;i<this.population.length;i++)if(this.population[i].fitness>t&&(t=this.population[i].fitness,console.log(this.population[i].genes)),this.perfectScore==t){this.finished=!0,this.perfectScore=i;break}for(i=0;i<this.population.length;i++)for(var o=map(this.population[i].fitness,0,t,0,1),s=floor(100*o),n=0;n<s;n++)this.matingPool.push(this.population[i])},this.generate=function(){for(var t=0;t<this.population.length;t++){var i=floor(random(this.matingPool.length)),o=floor(random(this.matingPool.length)),s=this.matingPool[i],n=this.matingPool[o],h=s.crossover(n);h.mutate(this.mutationRate),this.population[t]=h}this.generations++},this.isFinished=function(){return this.finished}}
"use strict";var bestPhrase,allPhrases,stats,target,popmax,mutationRate,population;function preload(){}function setup(){(bestPhrase=createP("Best phrase:")).class("best"),(allPhrases=createP("All phrases:")).position(600,10),allPhrases.class("all"),(stats=createP("Stats")).class("stats"),population=new Population(target="To be or not to be",mutationRate=.01,popmax=200)}function draw(){population.calcFitness(),population.naturalSelection(),population.generate(),population.isFinished()&&noLoop()}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkROQS5qcyIsIlBvcHVsYXRpb24uanMiLCJza2V0Y2guanMiXSwibmFtZXMiOlsiRE5BIiwibnVtIiwidGhpcyIsImdlbmVzIiwiaSIsImZpdG5lc3MiLCJuZXdDaGFyIiwiZ2V0UGhyYXNlIiwiam9pbiIsImNhbGNGaXRuZXNzIiwidGFyZ2V0Iiwic2NvcmUiLCJsZW5ndGgiLCJjaGFyQXQiLCJjcm9zc292ZXIiLCJwYXJ0bmVyIiwiY2hpbGQiLCJtaWRwb2ludCIsImZsb29yIiwicmFuZG9tIiwibXV0YXRlIiwibXV0YXRpb25SYXRlIiwibWFwIiwia2V5IiwiYyIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsIlBvcHVsYXRpb24iLCJwIiwibSIsInBvcHVsYXRpb24iLCJtYXRpbmdQb29sIiwiZ2VuZXJhdGlvbnMiLCJmaW5pc2hlZCIsInBlcmZlY3RTY29yZSIsImJlc3QiLCJuYXR1cmFsU2VsZWN0aW9uIiwibWF4Rml0bmVzcyIsImNvbnNvbGUiLCJsb2ciLCJmaXRuZXNzcyIsIm4iLCJqIiwicHVzaCIsImdlbmVyYXRlIiwiYSIsImIiLCJwYXJ0bmVyQSIsInBhcnRuZXJCIiwiaXNGaW5pc2hlZCIsImJlc3RQaHJhc2UiLCJhbGxQaHJhc2VzIiwic3RhdHMiLCJwb3BtYXgiLCJwcmVsb2FkIiwic2V0dXAiLCJjcmVhdGVQIiwicG9zaXRpb24iLCJkcmF3Iiwibm9Mb29wIl0sIm1hcHBpbmdzIjoiQUFBQSxhQUVBLFNBQVNBLElBQUlDLEdBQ1hDLEtBQUtDLE1BQVEsR0FHYixJQUFLLElBQUlDLEVBRlRGLEtBQUtHLFFBQVUsRUFFQ0QsRUFBSUgsRUFBS0csSUFDdkJGLEtBQUtDLE1BQU1DLEdBQUtFLFVBR2xCSixLQUFLSyxVQUFZLFdBQ2YsT0FBT0wsS0FBS0MsTUFBTUssS0FBSyxLQUd6Qk4sS0FBS08sWUFBYyxTQUFVQyxHQUczQixJQUZBLElBQUlDLEVBQVEsRUFFSFAsRUFBSSxFQUFHQSxFQUFJRixLQUFLQyxNQUFNUyxPQUFRUixJQUNqQ0Ys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YSxXQUNoQixPQUFPL0MsS0FBSytCO0FDcEVoQixhQUVBLElBQUlpQixXQUNBQyxXQUNBQyxNQUNBMUMsT0FDQTJDLE9BQ0FoQyxhQUNBUyxXQUVKLFNBQVN3QixXQUVULFNBQVNDLFNBQ1BMLFdBQWFNLFFBQVEsaUJBQ0gsTUFBRSxTQUNwQkwsV0FBYUssUUFBUSxpQkFDVkMsU0FBUyxJQUFLLElBQ3pCTixXQUFrQixNQUFFLFFBQ3BCQyxNQUFRSSxRQUFRLFVBQ0gsTUFBRSxTQUlmMUIsV0FBYSxJQUFJSCxXQUhqQmpCLE9BQVMscUJBRVRXLGFBQWUsSUFEZmdDLE9BQVMsS0FLWCxTQUFTSyxPQUNQNUIsV0FBV3JCLGNBQ1hxQixXQUFXTSxtQkFDWE4sV0FBV2MsV0FFUGQsV0FBV21CLGNBQ2JVIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5mdW5jdGlvbiBETkEobnVtKSB7XG4gIHRoaXMuZ2VuZXMgPSBbXTtcbiAgdGhpcy5maXRuZXNzID0gMDtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IG51bTsgaSsrKSB7XG4gICAgdGhpcy5nZW5lc1tpXSA9IG5ld0NoYXIoKTtcbiAgfVxuXG4gIHRoaXMuZ2V0UGhyYXNlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmdlbmVzLmpvaW4oXCJcIik7XG4gIH07XG5cbiAgdGhpcy5jYWxjRml0bmVzcyA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICB2YXIgc2NvcmUgPSAwO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmdlbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodGhpcy5nZW5lc1tpXSA9PSB0YXJnZXQuY2hhckF0KGkpKSB7XG4gICAgICAgIHNjb3JlKys7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5maXRuZXNzID0gc2NvcmUgLyB0YXJnZXQubGVuZ3RoO1xuICB9O1xuXG4gIHRoaXMuY3Jvc3NvdmVyID0gZnVuY3Rpb24gKHBhcnRuZXIpIHtcbiAgICB2YXIgY2hpbGQgPSBuZXcgRE5BKHRoaXMuZ2VuZXMubGVuZ3RoKTtcbiAgICB2YXIgbWlkcG9pbnQgPSBmbG9vcihyYW5kb20odGhpcy5nZW5lcy5sZW5ndGgpKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5nZW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGkgPiBtaWRwb2ludCkge1xuICAgICAgICBjaGlsZC5nZW5lc1tpXSA9IHRoaXMuZ2VuZXNbaV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjaGlsZC5nZW5lc1tpXSA9IHBhcnRuZXIuZ2VuZXNbaV07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGNoaWxkO1xuICB9O1xuXG4gIHRoaXMubXV0YXRlID0gZnVuY3Rpb24gKG11dGF0aW9uUmF0ZSkge1xuICAgIHRoaXMuZ2VuZXMgPSB0aGlzLmdlbmVzLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICBpZiAocmFuZG9tKDEpIDwgbXV0YXRpb25SYXRlKSB7XG4gICAgICAgIHJldHVybiBuZXdDaGFyKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBrZXk7XG4gICAgfSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIG5ld0NoYXIoKSB7XG4gIHZhciBjID0gZmxvb3IocmFuZG9tKDYzLCAxMjIpKTtcblxuICBpZiAoYyA9PT0gNjMpIHtcbiAgICBjID0gMzI7XG4gIH1cblxuICBpZiAoYyA9PT0gNjQpIHtcbiAgICBjID0gNDY7XG4gIH1cblxuICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShjKTtcbn0iLCJcInVzZSBzdHJpY3RcIjtcblxuZnVuY3Rpb24gUG9wdWxhdGlvbihwLCBtLCBudW0pIHtcbiAgdGhpcy5wb3B1bGF0aW9uO1xuICB0aGlzLm1hdGluZ1Bvb2w7XG4gIHRoaXMuZ2VuZXJhdGlvbnMgPSAwO1xuICB0aGlzLmZpbmlzaGVkID0gZmFsc2U7XG4gIHRoaXMudGFyZ2V0ID0gcDtcbiAgdGhpcy5tdXRhdGlvblJhdGUgPSBtO1xuICB0aGlzLnBlcmZlY3RTY29yZSA9IDE7XG4gIHRoaXMuYmVzdCA9IFwiXCI7XG4gIHRoaXMucG9wdWxhdGlvbiA9IFtdO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtOyBpKyspIHtcbiAgICB0aGlzLnBvcHVsYXRpb25baV0gPSBuZXcgRE5BKHRoaXMudGFyZ2V0Lmxlbmd0aCk7XG4gIH1cblxuICB0aGlzLmNhbGNGaXRuZXNzID0gZnVuY3Rpb24gKCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wb3B1bGF0aW9uLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLnBvcHVsYXRpb25baV0uY2FsY0ZpdG5lc3ModGFyZ2V0KTtcbiAgICB9XG4gIH07XG5cbiAgdGhpcy5jYWxjRml0bmVzcygpO1xuICB0aGlzLm1hdGluZ1Bvb2wgPSBbXTtcblxuICB0aGlzLm5hdHVyYWxTZWxlY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5tYXRpbmdQb29sID0gW107XG4gICAgdmFyIG1heEZpdG5lc3MgPSAwOyAvL3BpY2sgdGhlIG1vc3QgZml0IEROQVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnBvcHVsYXRpb24ubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh0aGlzLnBvcHVsYXRpb25baV0uZml0bmVzcyA+IG1heEZpdG5lc3MpIHtcbiAgICAgICAgbWF4Rml0bmVzcyA9IHRoaXMucG9wdWxhdGlvbltpXS5maXRuZXNzO1xuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnBvcHVsYXRpb25baV0uZ2VuZXMpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5wZXJmZWN0U2NvcmUgPT0gbWF4Rml0bmVzcykge1xuICAgICAgICB0aGlzLmZpbmlzaGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5wZXJmZWN0U2NvcmUgPSBpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucG9wdWxhdGlvbi5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGZpdG5lc3NzID0gbWFwKHRoaXMucG9wdWxhdGlvbltpXS5maXRuZXNzLCAwLCBtYXhGaXRuZXNzLCAwLCAxKTtcbiAgICAgIHZhciBuID0gZmxvb3IoZml0bmVzc3MgKiAxMDApO1xuXG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG47IGorKykge1xuICAgICAgICB0aGlzLm1hdGluZ1Bvb2wucHVzaCh0aGlzLnBvcHVsYXRpb25baV0pO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICB0aGlzLmdlbmVyYXRlID0gZnVuY3Rpb24gKCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wb3B1bGF0aW9uLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgYSA9IGZsb29yKHJhbmRvbSh0aGlzLm1hdGluZ1Bvb2wubGVuZ3RoKSk7XG4gICAgICB2YXIgYiA9IGZsb29yKHJhbmRvbSh0aGlzLm1hdGluZ1Bvb2wubGVuZ3RoKSk7XG4gICAgICB2YXIgcGFydG5lckEgPSB0aGlzLm1hdGluZ1Bvb2xbYV07XG4gICAgICB2YXIgcGFydG5lckIgPSB0aGlzLm1hdGluZ1Bvb2xbYl07XG4gICAgICB2YXIgY2hpbGQgPSBwYXJ0bmVyQS5jcm9zc292ZXIocGFydG5lckIpO1xuICAgICAgY2hpbGQubXV0YXRlKHRoaXMubXV0YXRpb25SYXRlKTtcbiAgICAgIHRoaXMucG9wdWxhdGlvbltpXSA9IGNoaWxkO1xuICAgIH1cblxuICAgIHRoaXMuZ2VuZXJhdGlvbnMrKztcbiAgfTtcblxuICB0aGlzLmlzRmluaXNoZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZmluaXNoZWQ7XG4gIH07XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBiZXN0UGhyYXNlO1xudmFyIGFsbFBocmFzZXM7XG52YXIgc3RhdHM7XG52YXIgdGFyZ2V0O1xudmFyIHBvcG1heDtcbnZhciBtdXRhdGlvblJhdGU7XG52YXIgcG9wdWxhdGlvbjtcblxuZnVuY3Rpb24gcHJlbG9hZCgpIHt9XG5cbmZ1bmN0aW9uIHNldHVwKCkge1xuICBiZXN0UGhyYXNlID0gY3JlYXRlUChcIkJlc3QgcGhyYXNlOlwiKTtcbiAgYmVzdFBocmFzZVtcImNsYXNzXCJdKFwiYmVzdFwiKTtcbiAgYWxsUGhyYXNlcyA9IGNyZWF0ZVAoXCJBbGwgcGhyYXNlczpcIik7XG4gIGFsbFBocmFzZXMucG9zaXRpb24oNjAwLCAxMCk7XG4gIGFsbFBocmFzZXNbXCJjbGFzc1wiXShcImFsbFwiKTtcbiAgc3RhdHMgPSBjcmVhdGVQKFwiU3RhdHNcIik7XG4gIHN0YXRzW1wiY2xhc3NcIl0oXCJzdGF0c1wiKTtcbiAgdGFyZ2V0ID0gXCJUbyBiZSBvciBub3QgdG8gYmVcIjtcbiAgcG9wbWF4ID0gMjAwO1xuICBtdXRhdGlvblJhdGUgPSAwLjAxO1xuICBwb3B1bGF0aW9uID0gbmV3IFBvcHVsYXRpb24odGFyZ2V0LCBtdXRhdGlvblJhdGUsIHBvcG1heCk7XG59XG5cbmZ1bmN0aW9uIGRyYXcoKSB7XG4gIHBvcHVsYXRpb24uY2FsY0ZpdG5lc3MoKTtcbiAgcG9wdWxhdGlvbi5uYXR1cmFsU2VsZWN0aW9uKCk7XG4gIHBvcHVsYXRpb24uZ2VuZXJhdGUoKTtcblxuICBpZiAocG9wdWxhdGlvbi5pc0ZpbmlzaGVkKCkpIHtcbiAgICBub0xvb3AoKTtcbiAgfVxufSJdfQ==
